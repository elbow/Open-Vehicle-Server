# TODO: use drupal:7-fpm-alpine
FROM drupal:7

# install Composer globally
RUN curl -sS https://getcomposer.org/installer | php \
  && mv composer.phar /usr/local/bin/composer

# install Drush 8.x
RUN composer global require drush/drush:8.4.2 \
  && echo "export PATH=\"$HOME/.composer/vendor/bin:$PATH\"" > ~/.bashrc

# Copy OVMS module over
COPY --chown=www-data:www-data drupal/ /var/www/html/sites/all/modules/openvehicles/

# TODO: automatically set up drupal and enable openvehicles module

EXPOSE 80